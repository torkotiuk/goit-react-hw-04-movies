{"version":3,"sources":["pages/MoviesPage.jsx"],"names":["KEY","axios","defaults","baseURL","MoviesPage","state","movies","query","handleChange","e","setState","currentTarget","value","trim","handleSubmit","preventDefault","searchMovies","setHistory","props","history","push","search","searchQuery","get","then","response","data","results","this","location","console","log","onSubmit","type","onChange","map","movie","to","pathname","id","from","title","Component"],"mappings":"0NAIMA,EAAM,mCACZC,IAAMC,SAASC,QAAU,6B,IAEnBC,E,4MACJC,MAAQ,CACNC,OAAQ,GACRC,MAAO,I,EAiBTC,aAAe,SAAAC,GACb,EAAKC,SAAS,CAAEH,MAAOE,EAAEE,cAAcC,MAAMC,U,EAG/CC,aAAe,SAAAL,GACbA,EAAEM,iBACF,EAAKC,eAGL,EAAKC,aAEL,EAAKP,SAAS,CAAEH,MAAO,M,EAGzBU,WAAa,WACX,IAAQV,EAAU,EAAKF,MAAfE,MACR,EAAKW,MAAMC,QAAQC,KAAK,CAEtBC,OAAO,SAAD,OAAWd,GACjBF,MAAO,CAAEiB,YAAY,GAAD,OAAKf,O,EAI7BS,aAAe,WACb,IAAQT,EAAU,EAAKF,MAAfE,MACR,OAAON,IACJsB,IADI,kCAC2BvB,EAD3B,kBACwCO,IAC5CiB,MAAK,SAAAC,GACJ,EAAKf,SAAS,CAAEJ,OAAQmB,EAASC,KAAKC,c,uDA1C5C,WAAqB,IAAD,OAClB,GAAIC,KAAKV,MAAMW,SAASxB,OAASuB,KAAKV,MAAMW,SAASxB,MAAMiB,YAAa,CACtEM,KAAKlB,SAAS,CAAEH,MAAOqB,KAAKV,MAAMW,SAASxB,MAAMiB,cAEjD,IAAMf,EAAQqB,KAAKV,MAAMW,SAASxB,MAAMiB,YACxCrB,IACGsB,IADH,kCACkCvB,EADlC,kBAC+CO,IAC5CiB,MAAK,SAAAC,GACJ,EAAKf,SAAS,CAAEJ,OAAQmB,EAASC,KAAKC,gB,oBAsC9C,WAAU,IAAD,OAGP,OAFAG,QAAQC,IAAI,+BAAgCH,KAAKV,MAAMW,SAASR,QAG9D,qCACE,uBAAMW,SAAUJ,KAAKd,aAArB,UACE,uBACEmB,KAAK,OACLrB,MAAOgB,KAAKvB,MAAME,MAClB2B,SAAUN,KAAKpB,eAEjB,wBAAQyB,KAAK,SAAb,uBAGF,6BACGL,KAAKvB,MAAMC,OAAO6B,KAAI,SAAAC,GAAK,OAC1B,6BACE,cAAC,IAAD,CACEC,GAAI,CACFC,SAAS,WAAD,OAAaF,EAAMG,IAC3BlC,MAAO,CAAEmC,KAAM,EAAKtB,MAAMW,WAH9B,SAMGO,EAAMK,SAPFL,EAAMG,gB,GApEFG,aAqFVtC","file":"static/js/movies-page.c10c8e3c.chunk.js","sourcesContent":["import { Component } from 'react';\r\nimport { Link } from 'react-router-dom';\r\nimport axios from 'axios';\r\n\r\nconst KEY = 'b623cf494fc852caec180044c42a9501';\r\naxios.defaults.baseURL = 'https://api.themoviedb.org';\r\n\r\nclass MoviesPage extends Component {\r\n  state = {\r\n    movies: [],\r\n    query: '',\r\n  };\r\n\r\n  componentDidMount() {\r\n    if (this.props.location.state && this.props.location.state.searchQuery) {\r\n      this.setState({ query: this.props.location.state.searchQuery });\r\n\r\n      const query = this.props.location.state.searchQuery;\r\n      axios\r\n        .get(`/3/search/movie?api_key=${KEY}&query=${query}`)\r\n        .then(response => {\r\n          this.setState({ movies: response.data.results });\r\n        });\r\n    }\r\n  }\r\n\r\n  //input change\r\n  handleChange = e => {\r\n    this.setState({ query: e.currentTarget.value.trim() });\r\n  };\r\n\r\n  handleSubmit = e => {\r\n    e.preventDefault();\r\n    this.searchMovies();\r\n    //\r\n    // console.log(this.state.query);\r\n    this.setHistory();\r\n    //\r\n    this.setState({ query: '' });\r\n  };\r\n\r\n  setHistory = () => {\r\n    const { query } = this.state;\r\n    this.props.history.push({\r\n      // pathname: this.props.location.pathname,\r\n      search: `query=${query}`,\r\n      state: { searchQuery: `${query}` },\r\n    });\r\n  };\r\n\r\n  searchMovies = () => {\r\n    const { query } = this.state;\r\n    return axios\r\n      .get(`/3/search/movie?api_key=${KEY}&query=${query}`)\r\n      .then(response => {\r\n        this.setState({ movies: response.data.results });\r\n      });\r\n  };\r\n\r\n  render() {\r\n    console.log('MoviesPage > location.search', this.props.location.search);\r\n    // console.log('MoviesPage > match', this.props.match);\r\n    return (\r\n      <>\r\n        <form onSubmit={this.handleSubmit}>\r\n          <input\r\n            type=\"text\"\r\n            value={this.state.query}\r\n            onChange={this.handleChange}\r\n          ></input>\r\n          <button type=\"submit\">Search</button>\r\n        </form>\r\n\r\n        <ul>\r\n          {this.state.movies.map(movie => (\r\n            <li key={movie.id}>\r\n              <Link\r\n                to={{\r\n                  pathname: `/movies/${movie.id}`,\r\n                  state: { from: this.props.location },\r\n                }}\r\n              >\r\n                {movie.title}\r\n              </Link>\r\n            </li>\r\n          ))}\r\n        </ul>\r\n      </>\r\n    );\r\n  }\r\n}\r\n\r\nexport default MoviesPage;\r\n"],"sourceRoot":""}